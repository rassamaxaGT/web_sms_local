@echo off
setlocal enabledelayedexpansion

:: Устанавливаем имя выходного файла
set "outputFile=file_contents_log.txt"

:: Создаем или очищаем выходной файл
echo. > "%outputFile%"

echo "Начинаем сканирование директории и запись содержимого файлов в %outputFile%..."
echo.

:: Обходим все файлы и папки, начиная с текущей директории
for /r %%f in (*) do (
    :: Проверяем, является ли текущий элемент файлом, а не папкой
    if exist "%%f" (
        echo --------------------------------------------------------------------------------
        echo Путь к файлу: "%%f"
        echo --------------------------------------------------------------------------------
        
        :: Добавляем путь к файлу в выходной файл
        echo.>> "%outputFile%"
        echo -------------------------------------------------------------------------------->> "%outputFile%"
        echo Путь к файлу: "%%f">> "%outputFile%"
        echo -------------------------------------------------------------------------------->> "%outputFile%"
        
        :: Читаем содержимое файла и добавляем его в выходной файл
        :: Используем findstr для отображения содержимого файла в консоли
        :: Используем type для записи содержимого в файл
        type "%%f" >> "%outputFile%"
        echo.>> "%outputFile%"
        
        echo Содержимое файла "%%f" записано.
        echo.
    )
)

echo.
echo "Сканирование завершено. Все пути и содержимое файлов записаны в %outputFile%."
pause
